## üìñ –û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏
–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∏ —á—Ç–µ–Ω–∏—è –ø–æ—Å—Ç–æ–≤ –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º GraphQL

### –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ —Å–∏—Å—Ç–µ–º—ã –ø–æ—Å—Ç–æ–≤: 
- –ú–æ–∂–Ω–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ—Å—Ç–æ–≤. 
- –ú–æ–∂–Ω–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ—Å—Ç –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –ø–æ–¥ –Ω–∏–º. 
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –Ω–∞–ø–∏—Å–∞–≤—à–∏–π –ø–æ—Å—Ç, –º–æ–∂–µ—Ç –∑–∞–ø—Ä–µ—Ç–∏—Ç—å –æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –∫ —Å–≤–æ–µ–º—É –ø–æ—Å—Ç—É. 

### –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ —Å–∏—Å—Ç–µ–º—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –∫ –ø–æ—Å—Ç–∞–º: 
- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω—ã –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏, –ø–æ–∑–≤–æ–ª—è—è –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π. 
- –î–ª–∏–Ω–∞ —Ç–µ–∫—Å—Ç–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∞ –¥–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä, 2000 —Å–∏–º–≤–æ–ª–æ–≤. 
- –°–∏—Å—Ç–µ–º–∞ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤.

## API

API –æ–ø–∏—Å–∞–Ω–æ –≤ graphqls —Ñ–∞–π–ª–∞—Ö –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ [graph](./graph). –ó–∞–ø—Ä–æ—Å—ã –±—ã–ª–∏ —Ä–∞–∑–¥–µ–ª–µ–Ω—ã –Ω–∞ –¥–≤–∞ –¥–æ–º–µ–Ω–∞: –ø–æ—Å—Ç—ã –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏.

–ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å GraphQl –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ gqlgen.


## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
### Queries

–ë—ã–ª–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∑–∞–ø—Ä–æ—Å—ã:
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ—Å—Ç–æ–≤ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π (—É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –Ω–æ–º–µ—Ä –∏ —Ä–∞–∑–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã)
- –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ—Å—Ç–µ —Å –ø–æ–ª—É—á–µ–Ω–∏–µ–º –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ —Å –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–π –≤–ª–æ–∂–µ–Ω–æ—Å—Ç—å—é –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π 

–î–ª—è —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã N+1 –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è –ø–æ—Å—Ç–∞ –∏ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –ø–æ–¥–≥—Ä—É–∂–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ —Ç–æ–º —Å–ª—É—á–∞–µ, 
–µ—Å–ª–∏ –æ–Ω–∏ –∑–∞–ø—Ä–∞—à–∏–≤–∞—é—Ç—Å—è –≤ GraphQL –∑–∞–ø—Ä–æ—Å–µ. 

### Mutations
–ë—ã–ª–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –º—É—Ç–∞—Ü–∏–∏:
- –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Å—Ç–∞
- –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–æ—Å—Ç–∞ –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å, —Ä–∞–∑—Ä–µ—à–µ–Ω—ã –ª–∏ –¥–ª—è –Ω–µ–≥–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏. 
–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–æ–∑–¥–∞–µ—Ç—Å—è –¥–ª—è –∫–æ–Ω—Ä–µ–∫—Ç–Ω–æ–≥–æ –ø–æ—Å—Ç–∞, –ø—Ä–∏ —ç—Ç–æ–º –æ–Ω –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç–≤–µ—Ç–æ–º –Ω–∞ –∫–∞–∫–æ–π-—Ç–æ –¥—Ä—É–≥–æ–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π. 
–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è, –º–æ–∂–Ω–æ –ª–∏ –∫ –ø–æ—Å—Ç—É –æ—Å—Ç–∞–≤–ª—è—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏. 

### Subscriptions 
–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –ø–æ—Å—Ç—É. 

–î–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∞–º–∏ –±—ã–ª —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω CommentObserver, —Å –ø–æ–º–æ—â—å—é –∫–æ—Ç–æ—Ä–æ–≥–æ –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å, 
—É–¥–∞–ª—è—Ç—å –∏ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é —Å–ª—É—à–∞—Ç–µ–ª—è–º. 

–°–ª—É—à–∞—Ç–µ–ª–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç —Å–æ–±–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏–∑ –∫–∞–Ω–∞–ª–∞ –¥–ª—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –∏ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ —Å–ª—É—à–∞—Ç–µ–ª—è. 
–í –¥–∞–Ω–Ω–æ–π —Ä–∞–±–æ—Ç–µ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ä–∞–±–æ—Ç–∞ —Å –∏–¥–Ω–µ—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –Ω–æ –≤ –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–µ –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Ö—Ä–∞–Ω–∏–ª–∏—â–µ, –≤ –∫–æ—Ç–æ—Ä–æ–º 
–∫–∞–∂–¥—ã–π —Å–ª—É—à–∞—Ç–µ–ª—å –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç—Å—è id –ø–æ—Å—Ç–∞ –∏ id –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –î–ª—è —ç—Ç–æ–≥–æ –º–æ–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏, –∫ –ø—Ä–∏–º–µ—Ä—É,
–Ω–∞ –æ—Å–Ω–æ–≤–µ JWT —Ç–æ–∫–µ–Ω–æ–≤.

–ü—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Å–ª—É—à–∞—Ç–µ–ª—å —É–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞.

### –í—ã–±–æ—Ä —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –¥–∞–Ω–Ω—ã—Ö
–ï—Å—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—ã–±–æ—Ä–∞ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –¥–ª—è –ø–æ—Å—Ç–æ–≤ –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤: –ª–∏–±–æ PostgeSQL, –ª–∏–±–æ —Å–∞–º–æ–ø–∏—Å–Ω–æ–µ in-memory —Ö—Ä–∞–Ω–∏–ª–∏—â–µ.

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤, –µ—Å–ª–∏ –º—ã —Ö–æ—Ç–∏–º –≤—ã–±—Ä–∞—Ç—å  in-memory —Ö—Ä–∞–Ω–∏–ª–∏—â–µ, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –±—É–¥–µ—Ç –ø—Ä–æ–ø–∏—Å–∞—Ç—å USE_IN_MEMORY=true –≤ [docker-compose.yml](./docker-compose.yml) —É —Å–µ—Ä–≤–∏—Å–∞ app (31 —Å—Ç—Ä–æ—á–∫–∞).–ü—Ä–∏ USE_IN_MEMORY=false –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è PostgreSQL.

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
–ë—ã–ª–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã unit-—Ç–µ—Å—Ç—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å–ª–æ–µ–≤ –ø—Ä–æ–≥—Ä–∞–º–º—ã.  –î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –º–æ–∫–æ–≤ —è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª —É—Ç–∏–ª–∏—Ç—É gomock.
–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —è —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª –º–æ–∫–∏ –¥–ª—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ —Å–ª–æ—ë–≤ gateway, service –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ Observers –≤ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ–º —Å–ª–æ–µ.





## üöÄ –ó–∞–ø—É—Å–∫
### –ó–∞–ø—É—Å–∫ –≤ Docker
1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
2. –ó–∞–ø—É—Å–∫–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
```bash
docker-compose up --build
```

## –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤
### –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Å—Ç–∞ —Å –æ—Ç–∫—Ä—ã—Ç—ã–º–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏
```graphql
mutation CreatePost {
    CreatePost(
        post: {
            name: "Test name"
            content: "Test random content"
            author: "Test author"
            commentsAllowed: true
        }
    ) {
        id
        createdAt
        name
        author
        content
    }
}

```

### –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Å—Ç–∞ —Å –∑–∞–∫—Ä—ã—Ç—ã–º–∏  –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏
```graphql
mutation CreatePost {
    CreatePost(
        post: {
            name: "Test name"
            content: "Test random content"
            author: "Test author"
            commentsAllowed: false
        }
    ) {
        id
        createdAt
        name
        author
        content
    }
}

```



### –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ—Å—Ç–µ

```graphql
query GetPostById {
    GetPostById(id: 1) {
        id
        createdAt
        name
        author
        content
        commentsAllowed
        comments(page: 1, pageSize: 5) {
            id
            createdAt
            author
            content
            post
            replies {
                id
                createdAt
                author
                content
                post
                replyTo
            }
        }
    }
}

```

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ—Å—Ç–æ–≤

```graphql
query GetAllPosts {
    GetAllPosts(page: 1, pageSize: 5) {
        id
        createdAt
        name
        author
        content
    }
}

```

### –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –ø–æ—Å—Ç–∞

```graphql
subscription CommentsSubscription {
    CommentsSubscription(postId: "1") {
        id
        createdAt
        author
        content
        post
        replyTo
    }
}
```

### –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è

```graphql
mutation CreateComment {
    CreateComment(input: { author: "test author", content: "test content", post: "1" }) {
        id
        createdAt
        author
        content
        post
        replyTo
    }
}
```